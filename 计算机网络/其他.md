
#### 怎么实现即时通讯，websocket的原理
1. 即时通讯：短轮询，长轮询，长连接，websocket。
2. WebSocket：通过单个TCP连接提供全双工（双向通信）通信信道的计算机通信协议。用户可以向服务器发送消息并接收事件驱动的响应。WebSocketAPI可以让多个用户连接到同一个实时服务器，并通过API进行通信并立即获得响应。工作原理是Pub-Sub（发布和订阅）。
3. websocket连接方式：
  1. 客户端发送GET 请求，Upgrade: websocket，Connection: Upgrade，告诉服务器，我要发起websocket协议。
  2. 服务器收到了协议，返回一个 Switching Protocol

#### DNS查询过程

  DNS作用是将用户请求的URL映射为具体的IP地址

1. 主机先向本地域名服务器进行递归查询。
2. 如果本地域名服务器不知道IP地址，则采用迭代查询，向根域名服务器进行递归查询。
3. 根域名服务器给出查询的IP，否则告诉本地域名服务器下一次查询的顶级域名服务器的IP地址。
4. 本地域名服务器向顶级域名服务器进行查询。
5. 顶级域名服务器给出查询的IP，否则告诉本地域名服务器下一次查询的权限域名服务器的IP地址。
6. 本地域名服务器向权限域名服务器进行查询。
7. 权限域名服务器告诉本地域名服务器所查询的主机的IP。
8. 本地域名服务器吧查询结果告诉主机。

#### cdn相关知识
CDN是内容分发网络。将源站内容分发至用户最近的节点，使用户可就近获取内容，提高用户访问的响应速度和成功率。解决因分布、带宽、服务器性能带来的访问延迟的问题，适用于站点加速、直播、点播等场景。

其基本思想是尽可能避开互联网上有可能影响数据传输速度和稳定性瓶颈的环节，使内容传输的更快、更稳定。通过在网络各处放置节点服务器所构成的在现有的互联网基础之上的一层智能虚拟网络，CDN系统能够实时地根据网络流量和各个节点的连接、负载情况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务器节点上。

#### 一个页面从输入 URL 到页面加载显示完成,这个过程中都发生了什么?
分为 4 个步骤:
1. 当发送一个 URL 请求时(可能是 Web 页面还是 Web 页面上每个资源的 URL),浏览器都会开启一个线程来处理这个请求,同时在远程 DNS 服务器上启动一个 DNS 查询,这能使浏览器获得请求对应的 IP 地址.
2. 浏览器与远程 Web 服务器通过 TCP 三次握手协商来建立一个 TCP/IP 连接.该握手包括一个同步报文,一个同步-应答报文和一个应答报文,这三个报文在 浏览器和服务器之间传递.该握手首先由客户端尝试建立起通信,而后服务器应答并接受客户端的请求,最后由客户端发出已经被接受的请求报文.
3. 一旦 TCP/IP 连接建立,浏览器会通过该连接向远程服务器发送 HTTP 的 GET 请求.远程服务器找到资源并使用 HTTP响应返回该资源,值为 200 的 HTTP 响应状态表示一个正确的响应.
4. 此时,Web 服务器提供资源服务,客户端开始下载资源.

#### 浏览器缓存
 - 强缓存：不发请求，直接从缓存读取资源。
 - 协商缓存：强制缓存失效后，浏览器携带缓存标识（If-Modified-Since和if-none-match）向服务器发起请求，由服务器根据缓存标识决定是否使用缓存的过程。

请求过程：有缓存时，Cache-Control/Expires不过期使用强缓存，否则进行协商缓存，服务器判断ETag与if-none-match&&Last-Modified与If-Modified-Since是否相同，相同则返回304，继续使用缓存；否则返回200和新的资源和缓存标识。
缓存的字段：
 - Cache-Control：控制网页缓存，可以组合使用多种指令：public，private，no-cache，no-store，max-age，s-maxage，max-stale
 - Expires：指定资源到期的时间，=max-age + 请求时间
 - Last-Modified，If-Modified-Since：资源在服务器上的最后修改时间
 - ETag：服务器响应请求时，返回当前资源文件的一个唯一标识(由服务器生成)，只要资源有变化，Etag就会重新生成。
 - if-none-match：= ETag

#### etag和last-modified区别
本地打开缓存文件，即使没有修改，Last-Modified仍然被修改。
Last-Modified 只能以秒计时，在不可感知的时间内修改文件，服务端会认为资源还是命中了，返回304。

#### 网络七层模型，每层的作用、具体协议有哪些
- 七层模型：
  1. 应用层：
    - 作用： 为运用程序提供服务并规定运用程序通信过程中相关细节
    - 常见的协议： FTP（文本传输协议） HTTP（超文本传输协议） TFTP（简单文本传输协议）DNS（域名解析服务协议） DHCP（动态主机配置协议）
  2. 表示层：
    - 作用：负责数据格式的转换（包括加密），确保一方应用层数据能被另一方应用层理解
  3. 会话层：
    - 作用： 管理主机之间的会话进程，即负责建立、管理、终止进程之间的会话
    - 常见的协议：socket
  4. 传输层：
    - 作用： 为端到端连接提供传输服务
    - 协议： TCP/UDP
  5. 网络层：
    - 作用： 将数据传输到目标地址，主要负责地址寻找和路由选择
    - 协议： IP/ICMP/
  6. 数据链路层：
    - 作用： 物理地址寻址、数据的成帧、流量控制、数据的检错、重发
    - 协议： ARP/RARP/PPP 
  7. 物理层：
    - 作用： 该层为上层协议提供了一个传输数据的物理媒体
- http是应用层的，传输层用TCP或者UDP协议
ACK 确认标志  SYN 同步标志 FIN 结束标志

#### http2优点/HTTP1.1与HTTP 2.0的主要区别
- 多路复用：一个连接并发处理多个请求
- 二进制分帧：应用层和传输层之间增加二进制分帧层，底层数据格式发生改变，改进传输性能，实现低延迟和高吞吐量
- 首部压缩：用HPACK算法对header进行压缩
- 服务器推送：在客户端请求之前发送数据的机制

#### 网络层协议 IP/ARP/ICMP
  - ip协议实现主机与主机之间的通信，无连接不可靠，ip报文分片，通过路由器转发
  - ARP实现ip地址到硬地址（数据链路层、物理层)间的映射，作用与同一局域网。如果通信的主机不在同一局域网，那么先通过路由转发到，此时arp解析的是路由器的ip地址，然后再到达目的网路后，再用arp解析出主机的硬地址

#### session和cookie
1. cookie数据存放在客户的浏览器上，session数据放在服务器上。
2. cookie不是很安全，别人可以分析存放在本地的COOKIE并进行COOKIE欺骗，考虑到安全应当使用session。
3. session会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能，考虑到减轻服务器性能方面，应当使用COOKIE。
4. 单个cookie保存的数据不能超过4K，很多浏览器都限制一个站点最多保存20个cookie。

####  B/S和C/S的区别
- B/S是一种特殊的C/S结构，B指浏览器软件，S指服务器软件，只能使用http协议进行通信
- C/S模式：客户机/服务器结构，客户端发起请求，服务器给出响应，客户端上需要安装客户端应用程序，维护和升级简单，只需要维护和升级服务端程序
